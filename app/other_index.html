<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Other APP</title>
    <script src="lib/jquery.min.js" charset="utf-8"></script>
    <script src="lib/jquery.i18n.properties-min-1.0.9.js"></script>
    <script>
        var PC = null;
        var iframe = null;
        function processMain() {
            console.log("called processMain()");
            //iframe 생성
            iframe = document.createElement("iframe");
            iframe.setAttribute("id", "PropertyController");
            iframe.src = "./index.html";
            iframe.width = 500;
            iframe.height = 500;
            document.getElementsByTagName("body")[0].appendChild(iframe);

            iframe.onload = function () {
                //Property Controller 초기화 및 실행
                PC = iframe.contentWindow.PC;
                PC.Interface.setLogOutput(true, 0);
                //TODO [hw.boo] 테스트 파일
                $.getJSON("./assets/test_data", function (data) {
                    var result = PC.Interface.init(data, notifyPC);
                    if (result === true) {
                        PC.Interface.start();
                    }
                });
            }
        }
        function notifyPC() {
            console.log("called notifyPC");
        }
    </script>
</head>
<body>
<h1 onclick="processMain()">Main</h1>
<script>
    $("body").on("keydown", function (event) {
        console.log("Main keydown : " + event);
    });
</script>
</body>
</html>